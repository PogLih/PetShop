<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
	 xmlns:layout="http://www.w3.org/1999/xhtml" layout:decorate="~{fragments/admin/main_layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.highcharts.com/highcharts.src.js"></script>
</head>
<body>
	<div layout:fragment="content" class="page-inner">
                <div class="page-title">
                    <h3>Dashboard</h3>
                    <div class="page-breadcrumb">
                        <ol class="breadcrumb">
                            <li><a href="index.html">Home</a></li>
                            <li class="active">Dashboard</li>
                        </ol>
                    </div>
                </div>
                 <div id="main-wrapper">
                    <div class="row">
                        
                    </div>
                </div>
                
            </div>
           <script type="text/javascript">
           $.ajax({
        		url: "chart",	
        		success: function(result){
        			var formatteddata = [];
        			for(var key in result){
        				var singleObject = {
        						name: '',
        						data: []
        					}
        				singleObject.name = key.toUpperCase();
        				for(var i = 0; i < result[key].length; i++){
        					singleObject.data.push(parseInt(result[key][i].subscribers));
        				}
        				formatteddata.push(singleObject);
        			}
        			
        			drawMultipleLineChart(formatteddata);
        		}
        	});

        	function drawMultipleLineChart(formatteddata){
        		Highcharts.chart('container', {

        		    title: {
        		        text: 'Solar Employment Growth by Sector, 2010-2019'
        		    },

        		    subtitle: {
        		        text: 'Source: thesolarfoundation.com'
        		    },

        		    yAxis: {
        		        title: {
        		            text: 'Number of Employees'
        		        }
        		    },
        		    legend: {
        		        layout: 'vertical',
        		        align: 'right',
        		        verticalAlign: 'middle'
        		    },

        		    plotOptions: {
        		        series: {
        		            label: {
        		                connectorAllowed: false
        		            },
        		            pointStart: 2011
        		        }
        		    },

        		    series: formatteddata,

        		    responsive: {
        		        rules: [{
        		            condition: {
        		                maxWidth: 500
        		            },
        		            chartOptions: {
        		                legend: {
        		                    layout: 'horizontal',
        		                    align: 'center',
        		                    verticalAlign: 'bottom'
        		                }
        		            }
        		        }]
        		    }

        		});
        	}
           </script> 
</html>